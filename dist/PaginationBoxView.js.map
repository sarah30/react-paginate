{"version":3,"sources":["../react_components/PaginationBoxView.js"],"names":["PaginationBoxView","props","handlePreviousPage","evt","preventDefault","returnValue","state","selected","handlePageSelected","handleNextPage","pageCount","setState","callCallback","selectedItem","onPageChange","pagination","items","pageRangeDisplayed","index","bind","pageClassName","pageLinkClassName","activeClassName","leftSide","rightSide","page","breakView","path","baseUrl","includes","pageParamName","pageView","marginPagesDisplayed","hideTailPages","keys","Object","breakLabelKey","length","breakLabelValue","breakLabel","breakClassName","initialPage","forcePage","disableInitialCallback","nextProps","disabled","disabledClassName","previousClasses","previousClassName","nextClasses","nextClassName","prev_href","next_href","containerClassName","previousLinkClassName","previousLabel","nextLinkClassName","nextLabel","propTypes","number","isRequired","node","func","bool","string","defaultProps"],"mappings":"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","file":"PaginationBoxView.js","sourcesContent":["'use strict';\n\nimport React, { Component, PropTypes } from 'react';\nimport classNames from 'classnames';\n\nimport createFragment from 'react-addons-create-fragment';\nimport PageView from './PageView';\nimport BreakView from './BreakView';\n\n\nexport default class PaginationBoxView extends Component {\n  static propTypes = {\n    pageCount             : PropTypes.number.isRequired,\n    pageRangeDisplayed    : PropTypes.number.isRequired,\n    marginPagesDisplayed  : PropTypes.number.isRequired,\n    previousLabel         : PropTypes.node,\n    nextLabel             : PropTypes.node,\n    breakLabel            : PropTypes.node,\n    onPageChange          : PropTypes.func,\n    initialPage           : PropTypes.number,\n    forcePage             : PropTypes.number,\n    disableInitialCallback: PropTypes.bool,\n    containerClassName    : PropTypes.string,\n    pageClassName         : PropTypes.string,\n    pageLinkClassName     : PropTypes.string,\n    activeClassName       : PropTypes.string,\n    previousClassName     : PropTypes.string,\n    nextClassName         : PropTypes.string,\n    previousLinkClassName : PropTypes.string,\n    nextLinkClassName     : PropTypes.string,\n    disabledClassName     : PropTypes.string,\n    breakClassName        : PropTypes.string,\n    baseUrl               : PropTypes.string,\n    pageParamName         : PropTypes.string,\n    hideTailPages         : PropTypes.bool,\n  };\n\n  static defaultProps = {\n    pageCount             : 10,\n    pageRangeDisplayed    : 2,\n    marginPagesDisplayed  : 3,\n    activeClassName       : \"selected\",\n    previousClassName     : \"previous\",\n    nextClassName         : \"next\",\n    previousLabel         : \"Previous\",\n    nextLabel             : \"Next\",\n    breakLabel            : \"...\",\n    disabledClassName     : \"disabled\",\n    disableInitialCallback: false,\n    baseUrl               : \"/\",\n    pageParamName         : \"page\",\n    hideTailPages         : false,\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      selected: props.initialPage ? props.initialPage :\n                props.forcePage   ? props.forcePage :\n                0\n    };\n  }\n\n  componentDidMount() {\n    // Call the callback with the initialPage item:\n    if (typeof(this.props.initialPage) !== 'undefined' && !this.props.disableInitialCallback) {\n      this.callCallback(this.props.initialPage);\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (typeof(nextProps.forcePage) !== 'undefined' && this.props.forcePage !== nextProps.forcePage) {\n      this.setState({selected: nextProps.forcePage});\n    }\n  }\n\n  handlePreviousPage = evt => {\n    evt.preventDefault ? evt.preventDefault() : (evt.returnValue = false);\n    if (this.state.selected > 0) {\n      this.handlePageSelected(this.state.selected - 1, evt);\n    }\n  };\n\n  handleNextPage = evt => {\n    evt.preventDefault ? evt.preventDefault() : (evt.returnValue = false);\n    if (this.state.selected < this.props.pageCount - 1) {\n      this.handlePageSelected(this.state.selected + 1, evt);\n    }\n  };\n\n  handlePageSelected = (selected, evt) => {\n    evt.preventDefault ? evt.preventDefault() : (evt.returnValue = false);\n\n    if (this.state.selected === selected) return;\n\n    this.setState({selected: selected});\n\n    // Call the callback with the new selected item:\n    this.callCallback(selected);\n  };\n\n  callCallback = (selectedItem) => {\n    if (typeof(this.props.onPageChange) !== \"undefined\" &&\n        typeof(this.props.onPageChange) === \"function\") {\n      this.props.onPageChange({selected: selectedItem});\n    }\n  };\n\n  pagination = () => {\n    let items = {};\n\n    if (this.props.pageCount <= this.props.pageRangeDisplayed) {\n\n      for (let index = 0; index < this.props.pageCount; index++) {\n        items['key' + index] = <PageView\n          onClick={this.handlePageSelected.bind(null, index)}\n          selected={this.state.selected === index}\n          pageClassName={this.props.pageClassName}\n          pageLinkClassName={this.props.pageLinkClassName}\n          activeClassName={this.props.activeClassName}\n          page={index + 1} />\n      }\n\n    } else {\n\n      let leftSide  = (this.props.pageRangeDisplayed / 2);\n      let rightSide = (this.props.pageRangeDisplayed - leftSide);\n\n      if (this.state.selected > this.props.pageCount - this.props.pageRangeDisplayed / 2) {\n        rightSide = this.props.pageCount - this.state.selected;\n        leftSide  = this.props.pageRangeDisplayed - rightSide;\n      }\n      else if (this.state.selected < this.props.pageRangeDisplayed / 2) {\n        leftSide  = this.state.selected;\n        rightSide = this.props.pageRangeDisplayed - leftSide;\n      }\n\n      let index;\n      let page;\n      let breakView;\n\n      for (index = 0; index < this.props.pageCount; index++) {\n\n        page = index + 1;\n\n        let path = this.props.baseUrl.includes('?') ? (this.props.baseUrl + '&' + this.props.pageParamName + '=') : (this.props.baseUrl + '?' + this.props.pageParamName + '=')\n\n        let pageView = (\n          <PageView\n            onClick={this.handlePageSelected.bind(null, index)}\n            selected={this.state.selected === index}\n            pageClassName={this.props.pageClassName}\n            pageLinkClassName={this.props.pageLinkClassName}\n            activeClassName={this.props.activeClassName}\n            page={index + 1}\n            baseUrl={path+(index + 1)}\n             />\n        );\n\n        if (page <= this.props.marginPagesDisplayed) {\n          items['key' + index] = pageView;\n          continue;\n        }\n\n        if (page > this.props.pageCount - this.props.marginPagesDisplayed) {\n          if (!this.props.hideTailPages){\n            items['key' + index] = pageView;\n          }\n          continue;\n        }\n\n        if ((index >= this.state.selected - leftSide) && (index <= this.state.selected + rightSide)) {\n          items['key' + index] = pageView;\n          continue;\n        }\n\n        let keys            = Object.keys(items);\n        let breakLabelKey   = keys[keys.length - 1];\n        let breakLabelValue = items[breakLabelKey];\n\n        if (this.props.breakLabel && breakLabelValue !== breakView) {\n          breakView = (\n            <BreakView\n              breakLabel={this.props.breakLabel}\n              breakClassName={this.props.breakClassName}\n            />\n          );\n          if (index == 1) {\n            items['key' + index] = breakView;\n          }\n        }\n      }\n    }\n\n    return items;\n  };\n\n  render() {\n    let disabled = this.props.disabledClassName;\n\n    const previousClasses = classNames(this.props.previousClassName,\n                                       {[disabled]: this.state.selected === 0});\n\n    const nextClasses = classNames(this.props.nextClassName,\n                                   {[disabled]: this.state.selected === this.props.pageCount - 1});\n\n   let path = this.props.baseUrl.includes('?') ? (this.props.baseUrl + '&' + this.props.pageParamName + '=') : (this.props.baseUrl + '?' + this.props.pageParamName + '=')\n\n   let prev_href = path+(this.state.selected)\n   let next_href = path+(this.state.selected+2)\n\n   if (this.state.selected === 0) {\n      prev_href = \"\"\n   }\n   if (this.state.selected === this.props.pageCount - 1) {\n      next_href = \"\"\n   }\n\n    return (\n      <ul className={this.props.containerClassName}>\n        <li className={previousClasses}>\n          <a onClick={this.handlePreviousPage}\n             className={this.props.previousLinkClassName}\n             tabIndex=\"0\"\n             onKeyPress={this.handlePreviousPage}\n             href={prev_href}\n             >\n            {this.props.previousLabel}\n          </a>\n        </li>\n\n        {createFragment(this.pagination())}\n\n        <li className={nextClasses}>\n          <a onClick={this.handleNextPage}\n             className={this.props.nextLinkClassName}\n             tabIndex=\"0\"\n             onKeyPress={this.handleNextPage}\n             href={next_href}\n             >\n            {this.props.nextLabel}\n          </a>\n        </li>\n      </ul>\n    );\n  }\n};\n"]}